---
title: 【C/C++】printf()输出参数的差异
cover: https://bu.dusays.com/2025/09/16/68c8524bc38b1.png
tags:
  - C++
  - C
  - C标准库
  - 学习日记
categories:
  - C
recommend: true
abbrlink: 516a
date: 2025-09-08 15:20:39
series:
---

## printf() 中的 format 格式

printf() 的标签属性为：

[C 库函数 - printf()](https://www.runoob.com/cprogramming/c-function-printf.html)

```text
%[flags标识][width宽度][.precision精度][length长度]specifier
```

| 格式字符 | 意义                                                         |
| :------- | :----------------------------------------------------------- |
| a, A     | 以十六进制形式输出浮点数(C99 新增)。实例 **printf("pi=%a\n", 3.14);** 输出 **pi=0x1.91eb86p+1**。 |
| d        | 以十进制形式输出带符号整数(正数不输出符号)                   |
| o        | 以八进制形式输出无符号整数(不输出前缀0)                      |
| x,X      | 以十六进制形式输出无符号整数(不输出前缀Ox)                   |
| u        | 以十进制形式输出无符号整数                                   |
| f        | 以小数形式输出单、双精度实数                                 |
| e,E      | 以指数形式输出单、双精度实数                                 |
| g,G      | 以%f或%e中较短的输出宽度输出单、双精度实数                   |
| c        | 输出单个字符                                                 |
| s        | 输出字符串                                                   |
| p        | 输出指针地址                                                 |
| lu       | 32位无符号整数                                               |
| llu      | 64位无符号整数                                               |

| flags（标识） | 描述                                                         |
| :------------ | :----------------------------------------------------------- |
| -             | 在给定的字段宽度内左对齐，默认是右对齐（参见 width 子说明符）。 |
| +             | 强制在结果之前显示加号或减号（+ 或 -），即正数前面会显示 + 号。默认情况下，只有负数前面会显示一个 - 号。 |
| 空格          | 如果没有写入任何符号，则在该值前面插入一个空格。             |
| #             | 与 o、x 或 X 说明符一起使用时，非零值前面会分别显示 0、0x 或 0X。 与 e、E 和 f 一起使用时，会强制输出包含一个小数点，即使后边没有数字时也会显示小数点。默认情况下，如果后边没有数字时候，不会显示显示小数点。 与 g 或 G 一起使用时，结果与使用 e 或 E 时相同，但是尾部的零不会被移除。 |
| 0             | 在指定填充 padding 的数字左边放置零（0），而不是空格（参见 width 子说明符）。 |

| width（宽度） | 描述                                                         |
| :------------ | :----------------------------------------------------------- |
| (number)      | 要输出的字符的最小数目。如果输出的值短于该数，结果会用空格填充。如果输出的值长于该数，结果不会被截断。 |
| *             | 宽度在 format 字符串中未指定，但是会作为附加整数值参数放置于要被格式化的参数之前。 |

| .precision（精度） | 描述                                                         |
| :----------------- | :----------------------------------------------------------- |
| .number            | 对于整数说明符（d、i、o、u、x、X）：precision 指定了要写入的数字的最小位数。如果写入的值短于该数，结果会用前导零来填充。如果写入的值长于该数，结果不会被截断。精度为 0 意味着不写入任何字符。 对于 e、E 和 f 说明符：要在小数点后输出的小数位数。 对于 g 和 G 说明符：要输出的最大有效位数。 对于 s: 要输出的最大字符数。默认情况下，所有字符都会被输出，直到遇到末尾的空字符。 对于 c 类型：没有任何影响。 当未指定任何精度时，默认为 1。如果指定时不带有一个显式值，则假定为 0。 |
| .*                 | 精度在 format 字符串中未指定，但是会作为附加整数值参数放置于要被格式化的参数之前。 |

| length（长度） | 描述                                                         |
| :------------- | :----------------------------------------------------------- |
| h              | 参数被解释为短整型或无符号短整型（仅适用于整数说明符：i、d、o、u、x 和 X）。 |
| l              | 参数被解释为长整型或无符号长整型，适用于整数说明符（i、d、o、u、x 和 X）及说明符 c（表示一个宽字符）和 s（表示宽字符字符串）。 |
| L              | 参数被解释为长双精度型（仅适用于浮点数说明符：e、E、f、g 和 G）。 |

- **附加参数** -- 根据不同的 format 字符串，函数可能需要一系列的附加参数，每个参数包含了一个要被插入的值，替换了 format 参数中指定的每个 % 标签。参数的个数应与 % 标签的个数相同。

%zu 对照过来，z 属于 length 字段，u 属于 type 字段。

该表达式用来表明输出格式是长度型（size_t）的无符号整型值。其中 size_t 在不同的位数操作系统中定义是不同的：

```cpp
typedef unsigned int    size_t;typedef unsigned long   size_t;
```

因此在程序设计的时候，如果参数是 size_t 或者 ssize_t，在进行格式化输入或输出的时候务必使用 ‘z’ 修饰符，以防止显示异常。

##  常见格式字符

常见的 %d、%x 等表示的是整型值，最多表示 4 个字节，而在 64 位系统中，数据有可能需要更多的字节表示，所有用 size_t 定义，就可以跨系统使用，不用担心溢出问题。对应的格式化显示的时候，也就不存在这个问题了。明白了这点，就可以理解’z’ 和 ‘l’ 等效了。‘z’ 只控制长度，具体的是有符号还是无符号，还是由后面的类型决定。

```cpp
%d, %i 整数
%u     无符整形
%f     浮点/双字
%x, %X 二进制整数
%o     八进制整数
%zu    size_t
%p     指针
%e     浮点/双字 （科学计算）
%g     浮点/双字
%s     C 字符串
%.*s   Pascal字符串
%c     字符
%C     unichar
%lld   64位长整数（long long）
%llu   无符64位长整数
%Lf    64位双字
```



参考：

- https://www.runoob.com/cprogramming/c-function-printf.html

- https://www.runoob.com/cprogramming/c-function-printf.html
